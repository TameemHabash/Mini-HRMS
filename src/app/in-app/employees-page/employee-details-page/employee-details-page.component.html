<app-content-header>
  <h2 pageTitle class="page-title app-main-color font-weight-bold text-uppercase">
    {{(employee.name)+" 's &nbsp; Details"}}</h2>
  <button btn mat-icon-button class="back-btn app-main-color mr-3" (click)="onNavigateEmployees()"
    matTooltip="Back to Employees" matTooltipShowDelay="350">
    <i class="material-icons">arrow_back</i>
  </button>
</app-content-header>
<form (ngSubmit)="onUpdateEmployee()" #employeeForm="ngForm" class="details-box d-flex flex-column">

  <div class="row">
    <div class="d-flex align-content-center col-6">
      <div class="app-bg-secondary employee-pic rounded-circle">
        <!-- <img class="employee-pic" src="imgs/00.PNG"> -->
      </div>
      <div class="emp-name">
        <mat-form-field appearance="legacy" hideRequiredMarker>
          <input [disabled]="!editable" matInput type="text" [ngModel]="employee.name  | titlecase" name="name" required
            width="15px">
        </mat-form-field>
      </div>
    </div>
    <div class="d-flex flex-row-reverse col-6 align-items-center">
      <button mat-raised-button class="app-bg-main edit-btn  mr-5 mt-2 text-white" type="button"
        (click)="onEditEmployee()">Edit</button>
      <button mat-raised-button class="app-bg-main edit-btn  mr-5 mt-2 text-white" type="button"
        (click)="onViewAttendances()">Attendances</button>
    </div>

  </div>


  <!-- end of the content's header  -->

  <!-- beginning of the inforamtion section -->
  <div class="row details-container">

    <!-- beginning of the all personal section  -->
    <div class="mx-0  col-lg-6 col-md-6 col-sm-12 all-personal-container">
      <div class="all-personal d-flex justify-content-center flex-column mx-5">
        <table class="main-color att-val">
          <tr class="">
            <th class="app-bg-secondary att">ID:</th>
            <th class="val">
              <p name="id" [textContent]="employeeID" class="emp-id"></p>
            </th>

          </tr>
          <tr class="">
            <th class="app-bg-secondary att">Rating:</th>
            <th class="val">
              <mat-form-field appearance="legacy" class="mx-3" hideRequiredMarker>
                <input [disabled]="!editable" matInput type="number" min="0" max="10" step="0.05"
                  [ngModel]="employee.rating" name="rating" required>
              </mat-form-field>
            </th>
          </tr>
          <tr>
            <th class="app-bg-secondary att">Deparatment:</th>
            <th class="val">
              <mat-form-field appearance="legacy" class="mx-3" hideRequiredMarker>
                <mat-select [disabled]="!editable" [ngModel]="employee.departmentID" name="departmentID" required
                  (selectionChange)="onDepartmentChange()">
                  <mat-option *ngFor="let depatrment of departments" [value]="depatrment.ID">
                    {{depatrment.name | titlecase}}
                  </mat-option>
                </mat-select>
              </mat-form-field>

            </th>
          </tr>
          <tr>
            <th class="app-bg-secondary att">Sector:</th>
            <th class="val">
              <mat-form-field appearance="legacy" class="mx-3" hideRequiredMarker>
                <mat-select [disabled]="!editable" [ngModel]="employee.sectorID" name="sectorID" required>
                  <mat-option *ngFor="let sector of sectors" [value]="sector.ID">
                    {{sector.name | titlecase}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </th>
          </tr>
          <tr>
            <th class="app-bg-secondary att">Base Pay:</th>
            <th class="val">
              <mat-form-field appearance="legacy" class="mx-3" hideRequiredMarker>
                <input [disabled]="!editable" matInput type="number" [ngModel]="salary" name="salary" required>
              </mat-form-field>
            </th>
          </tr>
          <tr *ngIf="showMore">
            <th class="app-bg-secondary att">Phone Number:</th>
            <th class="val">
              <mat-form-field appearance="legacy" class="mx-3" hideRequiredMarker>
                <input [disabled]="!editable" matInput type="text" [ngModel]="employee.telNumber" name="telNumber"
                  required>
              </mat-form-field>

            </th>
          </tr>
          <tr *ngIf="showMore">
            <th class="app-bg-secondary att">Status:</th>
            <th class="val">
              <mat-form-field appearance="legacy" class="mx-3" hideRequiredMarker>
                <mat-select [disabled]="!editable" [ngModel]="employee.status" name="status" required>
                  <mat-option *ngFor="let status of statuses" [value]="status">
                    {{status | titlecase}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </th>
          </tr>
          <tr *ngIf="showMore">
            <th class="app-bg-secondary att">HR Manager:</th>
            <th class="val">
              <mat-form-field appearance="legacy" class="mx-3" hideRequiredMarker>
                <mat-select [disabled]="!editable" [ngModel]="employee.HRID" name="HRID" required>
                  <mat-option *ngFor="let HR of HRs" [value]="HR.HRID">
                    {{HR.userName | titlecase}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </th>
          </tr>
          <tr *ngIf="showMore">
            <th class="app-bg-secondary att">Email:</th>
            <th class="val">
              <mat-form-field appearance="legacy" class="mx-3" hideRequiredMarker>
                <input [disabled]="!editable" matInput type="email" [ngModel]="employee.email" name="email" email
                  required>
              </mat-form-field>
            </th>
          </tr>
          <tr *ngIf="showMore">
            <th class="app-bg-secondary att">Address:</th>
            <th class="val">
              <mat-form-field appearance="legacy" class="mx-3" hideRequiredMarker>
                <input [disabled]="!editable" matInput type="text" [ngModel]="employee.address" name="address" required>
              </mat-form-field>
            </th>
          </tr>
          <tr *ngIf="showMore">
            <th class="app-bg-secondary att">SSN:</th>
            <th class="val">
              <mat-form-field appearance="legacy" class="mx-3" hideRequiredMarker>
                <input [disabled]="!editable" matInput type="text" [ngModel]="employee.SSN" name="SSN" required>
              </mat-form-field>
            </th>
          </tr>
          <tr *ngIf="showMore">
            <th class="app-bg-secondary att">Nationality:</th>
            <th class="val">
              <mat-form-field appearance="legacy" class="mx-3" hideRequiredMarker>
                <mat-select [disabled]="!editable" [ngModel]="employee.nationality" name="nationality" required>
                  <mat-option *ngFor="let nationality of nationalities" [value]="nationality">
                    {{nationality | titlecase}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </th>
          </tr>
          <tr *ngIf="showMore">
            <th class="app-bg-secondary att">National ID:</th>
            <th class="val">
              <mat-form-field appearance="legacy" class="mx-3" hideRequiredMarker>
                <input [disabled]="!editable" matInput type="text" [ngModel]="employee.nationalID" name="nationalID"
                  required>
              </mat-form-field>
            </th>
          </tr>
          <tr *ngIf="showMore">
            <th class="app-bg-secondary att">Birth Date:</th>
            <th class="val">
              <mat-form-field appearance="legacy" class="mx-3" hideRequiredMarker>
                <input [disabled]="!editable" matInput [ngModel]="employee.birthDate" name="birthDate" required
                  [matDatepicker]="birthDate">
                <mat-datepicker-toggle [for]="birthDate" matSuffix></mat-datepicker-toggle>
                <mat-datepicker #birthDate></mat-datepicker>
              </mat-form-field>
            </th>
          </tr>
          <tr *ngIf="showMore">
            <th class="app-bg-secondary att">Hire Date:</th>
            <th class="val">
              <mat-form-field appearance="legacy" class="mx-3" hideRequiredMarker>
                <input [disabled]="!editable" matInput [ngModel]="employee.startDate" name="startDate" required
                  [matDatepicker]="startDate" [matDatepickerFilter]="startDateFilter">
                <mat-datepicker-toggle [for]="startDate" matSuffix></mat-datepicker-toggle>
                <mat-datepicker #startDate></mat-datepicker>
              </mat-form-field>
            </th>
          </tr>
          <tr *ngIf="showMore">
            <th class="app-bg-secondary att">Gender:</th>
            <th class="val">
              <mat-form-field appearance="legacy" class="mx-3" hideRequiredMarker>
                <mat-select [disabled]="!editable" [ngModel]="employee.gender" name="gender" required>
                  <mat-option *ngFor="let gender of genders" [value]="gender">
                    {{gender | titlecase}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </th>
          </tr>
          <tr *ngIf="showMore">
            <th class="app-bg-secondary att">Active/Not:</th>
            <th class="val">
              <mat-form-field appearance="legacy" class="mx-3" hideRequiredMarker>
                <mat-select [disabled]="!editable" [ngModel]="employee.active" name="active" required>
                  <mat-option *ngFor="let activeState of actives" [value]="activeState.active">
                    {{activeState.name | titlecase}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </th>
          </tr>
        </table>

        <div class="d-flex center">
          <button *ngIf="!showMore" mat-raised-button class="show-more app-bg-main text-white" id="show-more"
            type="button" (click)="onShowMore()">Show
            more</button>
          <button *ngIf="showMore" mat-raised-button class="show-more app-bg-main text-white" id="show-more"
            type="button" (click)="onShowLess()" [disabled]="editable">Show
            Less</button>
        </div>
      </div>
    </div>
    <!-- end of the all personal section  -->

    <!-- beginning of the salary log section  -->
    <div class="mx-0 col-lg-6 col-md-6 col-sm-12 salary-log-container">
      <div class="salary-log d-flex justify-content-center flex-column mx-5">
        <div class="">
          <mat-form-field appearance="outline" class="mx-3">
            <mat-label>Raise</mat-label>
            <input matInput type="number" min="5" max="100" step="5" name="add-raise">
          </mat-form-field>
          <button mat-raised-button class="app-bg-main text-white" type="button" (click)="addRaise()">Add Raise</button>
        </div>
        <table class="main-color month-sal">
          <tr>
            <th class="app-bg-secondary month">July</th>
            <th class="sal">500 JD</th>
          </tr>
          <tr>
            <th class="app-bg-secondary month">August</th>
            <th class="sal">500 JD</th>
          </tr>
          <tr>
            <th class="app-bg-secondary month">September</th>
            <th class="sal">500 JD</th>
          </tr>
          <tr>
            <th class="app-bg-secondary month">October</th>
            <th class="sal">500 JD</th>
          </tr>
          <tr>
            <th class="app-bg-secondary month">November</th>
            <th class="sal">500 JD</th>
          </tr>
          <tr>
            <th class="app-bg-secondary month">December</th>
            <th class="sal">500 JD</th>
          </tr>
          <tr>
            <th class="app-bg-secondary month">January</th>
            <th class="sal">500 JD</th>
          </tr>
        </table>
      </div>
    </div>

    <!-- end of the salary log section  -->

  </div>
  <div class="d-flex center w-100  mt-4 flex-column">
    <button *ngIf="editable" mat-raised-button class="app-bg-main update-btn text-white" type="submit"
      [disabled]="!(employeeForm.valid && employeeForm.dirty && employeeForm.value.sectorID!==undefined) ">Update</button>
    <p *ngIf="employeeForm.value.sectorID === undefined" class="text-danger">Choose a
      sector</p>
  </div>
  <!-- !(employeeForm.valid && employeeForm.dirty && employeeForm.value.sectorID!==undefined) -->
</form>
